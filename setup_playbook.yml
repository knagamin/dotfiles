---
- name: Setup dotfiles by symlinking
  hosts: localhost
  vars:
    conf_files:
      - src: "{{ lookup('env', 'PWD') }}/vim/.vimrc"
        dest: "{{ ansible_env.HOME }}/.vimrc"
      - src: "{{ lookup('env', 'PWD') }}/screen/.screenrc"
        dest: "{{ ansible_env.HOME }}/.screenrc"
      - src: "{{ lookup('env', 'PWD') }}/tmux/.tmux.conf.local"
        dest: "{{ ansible_env.HOME }}/.tmux.conf.local"
  tasks:

    - name: Install "Oh My Tmux"
      git:
        clone: true
        repo: https://github.com/gpakosz/.tmux.git
        dest: "{{ lookup('env', 'HOME') }}/.tmux"
        force: true

    - name: Create symlink for "On My Tmux"
      file:
        src: "{{ lookup('env', 'HOME') }}/.tmux/.tmux.conf"
        dest: "{{ lookup('env', 'HOME') }}/.tmux.conf"
        state: link

    - name: tmux configuration
      file:
        src: "{{ item.src }}"
        path: "{{ item.dest }}"
        state: link
      loop: "{{ conf_files }}"
